(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-order-new"],{"1d08":function(t,i,e){var a=e("aae9");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=e("4f06").default;n("a1418ada",a,!0,{sourceMap:!1,shadowMode:!1})},"36b6":function(t,i,e){"use strict";var a=e("6b11"),n=e.n(a);n.a},"3ee6":function(t,i,e){"use strict";var a=e("288e");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=a(e("f499")),o=a(e("c79d")),s=a(e("798e")),d=a(e("450a")),r=a(e("2047")),l=a(e("d373")),u={components:{tuiButton:o.default,tuiListCell:s.default,tuiBottomPopup:d.default,tuiLoading:l.default},data:function(){return{hasCoupon:!0,insufficient:!1,orders:[],amount:0,norm:{product:{company:{image:{}}}},address:{},ids:"",desc:"",number:1,applied:!1,loading:!1}},onShow:function(){var t=this,i=uni.getStorageSync("addressId");console.log("show"),i?(console.log(1),r.default.address(i).then(function(i){console.log(i),t.address=i}).catch(function(t){console.log(t)})):r.default.defaultAddress().then(function(i){console.log(i),t.address=i}).catch(function(t){console.log(t)})},onLoad:function(t){var i=setInterval(function(){console.log(1),clearInterval(i)},2e3);console.log("load");var e=this;t.number&&(e.number=t.number),r.default.norm(t.id).then(function(t){t.id&&(e.norm=t)}).catch(function(t){console.log(t)})},methods:{chooseAddr:function(){uni.navigateTo({url:"../address/index"})},onKeyInput:function(t){this.desc=t.target.value},btnPay:function(){var t=this;if(t.address.id){this.applied=!0,this.loading=!0;var i=[{id:t.norm.product.id,norm:{id:t.norm.id,number:t.number}}];this.tui.wechatBowser()?(console.log("wechat"),this.tui.jssdk().then(function(e){r.default.applyOrder((0,n.default)(i),t.address.id,t.desc,"web").then(function(t){console.log(t);var i=t[0].current_payment.js_pay;e.chooseWXPay({appId:i.appId,timestamp:i.timeStamp,nonceStr:i.nonceStr,package:i.package,signType:i.signType,paySign:i.paySign,success:function(i){var e=setInterval(function(){console.log(1),r.default.queryOrder(t[0].id).then(function(t){"pay"==t.status&&(clearInterval(e),this.applied=!1,this.loading=!1,uni.navigateTo({url:"../order/success?id="+t.id}))}).catch(function(t){alert(t)})},2e3)}})}).catch(function(t){console.log(t)})}).catch(function(t){})):(console.log("app"),r.default.applyOrder((0,n.default)(i),t.address.id,t.desc,"app").then(function(t){t[0].id&&(console.log(t),window.parent.postMessage({event:"pay",params:{payment:t}},"*"))}).catch(function(t){}))}else this.tui.toast("请填写收件人信息",2e3,!1)}}};i.default=u},"450a":function(t,i,e){"use strict";e.r(i);var a=e("5bc6"),n=e("a845");for(var o in n)"default"!==o&&function(t){e.d(i,t,function(){return n[t]})}(o);e("36b6");var s,d=e("f0c5"),r=Object(d["a"])(n["default"],a["b"],a["c"],!1,null,"5886b462",null,!1,a["a"],s);i["default"]=r.exports},"5bc6":function(t,i,e){"use strict";var a,n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",{on:{touchmove:function(i){i.stopPropagation(),i.preventDefault(),arguments[0]=i=t.$handleEvent(i)}}},[e("v-uni-view",{staticClass:"tui-popup-class tui-bottom-popup",class:{"tui-popup-show":t.show},style:{background:t.bgcolor,height:t.height?t.height+"rpx":"auto"}},[t._t("default")],2),t.mask?e("v-uni-view",{staticClass:"tui-popup-mask",class:[t.show?"tui-mask-show":""],on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.handleClose.apply(void 0,arguments)}}}):t._e()],1)},o=[];e.d(i,"b",function(){return n}),e.d(i,"c",function(){return o}),e.d(i,"a",function(){return a})},"6b11":function(t,i,e){var a=e("9352");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=e("4f06").default;n("3006fa0a",a,!0,{sourceMap:!1,shadowMode:!1})},"873d":function(t,i,e){"use strict";e.r(i);var a=e("d6a8"),n=e("fd17");for(var o in n)"default"!==o&&function(t){e.d(i,t,function(){return n[t]})}(o);e("ce99");var s,d=e("f0c5"),r=Object(d["a"])(n["default"],a["b"],a["c"],!1,null,"067e5dfc",null,!1,a["a"],s);i["default"]=r.exports},9352:function(t,i,e){i=t.exports=e("2350")(!1),i.push([t.i,".tui-bottom-popup[data-v-5886b462]{width:100%;position:fixed;left:0;right:0;bottom:0;z-index:99999;visibility:hidden;-webkit-transform:translate3d(0,100%,0);transform:translate3d(0,100%,0);-webkit-transform-origin:center;transform-origin:center;-webkit-transition:all .3s ease-in-out;transition:all .3s ease-in-out;min-height:%?20?%}.tui-popup-show[data-v-5886b462]{-webkit-transform:translateZ(0);transform:translateZ(0);visibility:visible}.tui-popup-mask[data-v-5886b462]{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.6);z-index:99996;-webkit-transition:all .3s ease-in-out;transition:all .3s ease-in-out;opacity:0;visibility:hidden}.tui-mask-show[data-v-5886b462]{opacity:1;visibility:visible}",""])},"9f9e":function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,e("c5f6");var a={name:"tuiBottomPopup",props:{mask:{type:Boolean,default:!0},show:{type:Boolean,default:!1},bgcolor:{type:String,default:"#fff"},height:{type:Number,default:0}},methods:{handleClose:function(){this.show&&this.$emit("close",{})}}};i.default=a},a845:function(t,i,e){"use strict";e.r(i);var a=e("9f9e"),n=e.n(a);for(var o in a)"default"!==o&&function(t){e.d(i,t,function(){return a[t]})}(o);i["default"]=n.a},aae9:function(t,i,e){i=t.exports=e("2350")(!1),i.push([t.i,'.container[data-v-067e5dfc]{padding-bottom:%?98?%}.tui-box[data-v-067e5dfc]{padding:%?20?% 0 %?118?%;box-sizing:border-box}.tui-address[data-v-067e5dfc]{min-height:%?80?%;padding:%?10?% 0;box-sizing:border-box;position:relative}.tui-userinfo[data-v-067e5dfc]{font-size:%?30?%;font-weight:500;line-height:%?30?%;padding-bottom:%?12?%}.tui-name[data-v-067e5dfc]{padding-right:%?40?%}.tui-addr[data-v-067e5dfc]{font-size:%?24?%;word-break:break-all;padding-right:%?25?%}.tui-addr-tag[data-v-067e5dfc]{padding:%?5?% %?8?%;-webkit-flex-shrink:0;flex-shrink:0;background:#eb0909;color:#fff;display:-webkit-inline-box;display:-webkit-inline-flex;display:inline-flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;font-size:%?25?%;line-height:%?25?%;-webkit-transform:scale(.8);transform:scale(.8);-webkit-transform-origin:0 center;transform-origin:0 center;border-radius:%?6?%}.tui-bg-img[data-v-067e5dfc]{position:absolute;width:100%;height:%?8?%;left:0;bottom:0;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAL0AAAAECAMAAADszM6/AAAAOVBMVEUAAAAVqfH/fp//vWH/vWEVqfH/fp8VqfH/fp//vWEVqfH/fp8VqfH/fp//vWH/vWEVqfH/fp//vWHpE7b6AAAAEHRSTlMA6urqqlVVFRUVq6upqVZUDT4vVAAAAEZJREFUKM/t0CcOACAQRFF6r3v/w6IQJGwyDsPT882IQzQE0E3chToByjG5LwMgLZN3TQATmdypCciBya0cgOT3/h//9PgF49kd+6lTSIIAAAAASUVORK5CYII=") repeat}.tui-top[data-v-067e5dfc]{margin-top:%?20?%;overflow:hidden}.tui-goods-title[data-v-067e5dfc]{font-size:%?28?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.tui-padding[data-v-067e5dfc]{box-sizing:border-box}.tui-goods-item[data-v-067e5dfc]{width:100%;padding:%?20?% %?30?%;box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.tui-goods-img[data-v-067e5dfc]{width:%?180?%;height:%?180?%;display:block;-webkit-flex-shrink:0;flex-shrink:0}.tui-goods-center[data-v-067e5dfc]{-webkit-box-flex:1;-webkit-flex:1;flex:1;padding:%?20?% %?8?%;box-sizing:border-box}.tui-goods-name[data-v-067e5dfc]{max-width:%?310?%;word-break:break-all;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;font-size:%?26?%;line-height:%?32?%}.tui-goods-attr[data-v-067e5dfc]{font-size:%?22?%;color:#888;line-height:%?32?%;padding-top:%?20?%;word-break:break-all;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}.tui-price-right[data-v-067e5dfc]{text-align:right;font-size:%?24?%;color:#888;line-height:%?30?%;padding-top:%?20?%}.tui-flex[data-v-067e5dfc]{width:100%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;font-size:%?26?%}.tui-total-flex[data-v-067e5dfc]{-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end}.tui-color-red[data-v-067e5dfc],.tui-invoice-text[data-v-067e5dfc]{color:#e41f19;padding-right:%?30?%}.tui-balance[data-v-067e5dfc]{font-size:%?28?%;font-weight:500}.tui-black[data-v-067e5dfc]{color:#222;line-height:%?30?%}.tui-gray[data-v-067e5dfc]{color:#888;font-weight:400}.tui-light-dark[data-v-067e5dfc]{color:#666}.tui-goods-price[data-v-067e5dfc]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;padding-top:%?20?%}.tui-size-26[data-v-067e5dfc]{font-size:%?26?%;line-height:%?26?%}.tui-price-large[data-v-067e5dfc]{font-size:%?34?%;line-height:%?32?%;font-weight:600}.tui-flex-end[data-v-067e5dfc]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:end;-webkit-align-items:flex-end;align-items:flex-end;padding-right:0}.tui-phcolor[data-v-067e5dfc]{color:#b3b3b3;font-size:%?26?%}\n\n\n\n.tui-remark-box[data-v-067e5dfc]{padding:%?26?% %?30?%}\n\n.tui-remark[data-v-067e5dfc]{-webkit-box-flex:1;-webkit-flex:1;flex:1;font-size:%?26?%;padding-left:%?64?%}.tui-scale-small[data-v-067e5dfc]{-webkit-transform:scale(.8);transform:scale(.8);-webkit-transform-origin:100% center;transform-origin:100% center}.tui-scale-small .wx-switch-input[data-v-067e5dfc]{margin:0!important}\n\n[data-v-067e5dfc] uni-switch .uni-switch-input{margin-right:0!important}\n\n.tui-tabbar[data-v-067e5dfc]{width:100%;height:%?98?%;background:#fff;position:fixed;left:0;bottom:0;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;font-size:%?26?%;box-shadow:0 0 1px rgba(0,0,0,.3);padding-bottom:env(safe-area-inset-bottom);z-index:999}.tui-pr-30[data-v-067e5dfc]{padding-right:%?30?%}.tui-pr-20[data-v-067e5dfc]{padding-right:%?20?%}.tui-none-addr[data-v-067e5dfc]{height:%?80?%;padding-left:%?5?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.tui-addr-img[data-v-067e5dfc]{width:%?36?%;height:%?46?%;display:block;margin-right:%?15?%}.tui-pr25[data-v-067e5dfc]{padding-right:%?25?%}.tui-safe-area[data-v-067e5dfc]{height:%?1?%;padding-bottom:env(safe-area-inset-bottom)}.tui-order-title[data-v-067e5dfc]{position:relative;font-size:%?28?%;line-height:%?28?%;padding-left:%?12?%;box-sizing:border-box}.tui-order-title[data-v-067e5dfc]:before{content:"";position:absolute;left:0;top:0;border-left:%?4?% solid #eb0909;height:100%}',""])},ce99:function(t,i,e){"use strict";var a=e("1d08"),n=e.n(a);n.a},d6a8:function(t,i,e){"use strict";var a,n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",{staticClass:"container"},[e("v-uni-view",{staticClass:"tui-box"},[e("tui-list-cell",{attrs:{arrow:!0,last:!0,radius:!0},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.chooseAddr.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"tui-address"},[t.address.id?e("v-uni-view",[e("v-uni-view",{staticClass:"tui-userinfo"},[e("v-uni-text",{staticClass:"tui-name"},[t._v(t._s(t.address.name))]),t._v(t._s(t.address.phone))],1),e("v-uni-view",{staticClass:"tui-addr"},[t.address.tag&&"default"==t.address.tag?e("v-uni-view",{staticClass:"tui-addr-tag"},[t._v("默认")]):t._e(),e("v-uni-text",[t._v(t._s(t.address.content))])],1)],1):e("v-uni-view",{staticClass:"tui-none-addr"},[e("v-uni-image",{staticClass:"tui-addr-img",attrs:{src:"/static/images/index/map.png",mode:"widthFix"}}),e("v-uni-text",[t._v("选择收货地址")])],1)],1),e("v-uni-view",{staticClass:"tui-bg-img"})],1),e("v-uni-view",{staticClass:"tui-top tui-goods-info"},[e("tui-list-cell",{attrs:{hover:!1,lineLeft:!0}},[e("v-uni-view",{staticClass:"tui-goods-title"},[e("v-uni-image",{staticStyle:{width:"40rpx",height:"40rpx","margin-right":"10rpx"},attrs:{src:t.norm.product.company.image?t.norm.product.company.image.image_path:"",mode:"widthFix"}}),t._v(t._s(t.norm.product.company.name))],1)],1),e("tui-list-cell",{attrs:{hover:!1,padding:"0"}},[e("v-uni-view",{staticClass:"tui-goods-item"},[e("v-uni-image",{staticClass:"tui-goods-img",attrs:{src:t.norm.product.default_image}}),e("v-uni-view",{staticClass:"tui-goods-center"},[e("v-uni-view",{staticClass:"tui-goods-name"},[t._v(t._s(t.norm.product.name))]),e("v-uni-view",{staticClass:"tui-goods-attr"},[t._v(t._s(t.norm.spec_attr_names))])],1),e("v-uni-view",{staticClass:"tui-price-right"},[e("v-uni-view",[t._v("￥"+t._s(t.norm.price))]),e("v-uni-view",[t._v("x"+t._s(t.number))])],1)],1)],1),e("tui-list-cell",{attrs:{hover:!1}},[e("v-uni-view",{staticClass:"tui-padding tui-flex"},[e("v-uni-view",[t._v("商品总额：")]),e("v-uni-view",[t._v("￥"+t._s(t.norm.price*t.number))])],1)],1),e("tui-list-cell",{attrs:{hover:!1,lineLeft:!1,padding:"0"}},[e("v-uni-view",{staticClass:"tui-remark-box tui-padding tui-flex"},[e("v-uni-view",[t._v("订单备注")]),e("v-uni-input",{staticClass:"tui-remark",attrs:{type:"text",placeholder:"选填: 请先和商家协商一致","placeholder-class":"tui-phcolor"},on:{input:function(i){arguments[0]=i=t.$handleEvent(i),t.onKeyInput.apply(void 0,arguments)}}})],1)],1),e("tui-list-cell",{attrs:{hover:!1}},[e("v-uni-view",{staticClass:"tui-padding tui-flex"},[e("v-uni-view",[t._v("配送费")]),e("v-uni-view",[t._v("包邮")])],1)],1),e("tui-list-cell",{attrs:{hover:!1}},[e("v-uni-view",{staticClass:"tui-padding tui-flex"},[e("v-uni-view",[t._v("返还金币：")]),e("v-uni-view",[t._v(t._s(t.norm.product.coin*t.number))])],1)],1),e("tui-list-cell",{attrs:{hover:!1,last:!0}},[e("v-uni-view",{staticClass:"tui-padding tui-flex tui-total-flex"},[e("v-uni-view",{staticClass:"tui-flex-end tui-color-red"},[e("v-uni-view",{staticClass:"tui-black"},[t._v("合计：")]),e("v-uni-view",{staticClass:"tui-size-26"},[t._v("￥")]),e("v-uni-view",{staticClass:"tui-price-large"},[t._v(t._s(t.norm.price*t.number))])],1)],1)],1)],1)],1),e("v-uni-view",{staticClass:"tui-safe-area"}),e("v-uni-view",{staticClass:"tui-tabbar"},[e("v-uni-view",{staticClass:"tui-flex-end tui-color-red tui-pr-20"},[e("v-uni-view",{staticClass:"tui-black"},[t._v("实付金额:")]),e("v-uni-view",{staticClass:"tui-size-26"},[t._v("￥")]),e("v-uni-view",{staticClass:"tui-price-large"},[t._v(t._s(t.number*t.norm.price))])],1),e("v-uni-view",{staticClass:"tui-pr25"},[e("tui-button",{attrs:{width:"200rpx",height:"70rpx",type:"danger",shape:"circle",disabled:t.applied},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.btnPay.apply(void 0,arguments)}}},[t._v("确认支付")])],1)],1),e("tui-loading",{attrs:{visible:t.loading}})],1)},o=[];e.d(i,"b",function(){return n}),e.d(i,"c",function(){return o}),e.d(i,"a",function(){return a})},fd17:function(t,i,e){"use strict";e.r(i);var a=e("3ee6"),n=e.n(a);for(var o in a)"default"!==o&&function(t){e.d(i,t,function(){return a[t]})}(o);i["default"]=n.a}}]);