(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-order-new"],{"074d":function(t,e,i){var a=i("80a42");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("25f5c982",a,!0,{sourceMap:!1,shadowMode:!1})},1265:function(t,e,i){"use strict";i.r(e);var a=i("ab6b"),n=i.n(a);for(var o in a)"default"!==o&&function(t){i.d(e,t,function(){return a[t]})}(o);e["default"]=n.a},3891:function(t,e,i){"use strict";var a=i("074d"),n=i.n(a);n.a},"64ed":function(t,e,i){"use strict";i.r(e);var a=i("f49d"),n=i("ed5b");for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);i("b1dd");var s=i("2877"),r=Object(s["a"])(n["default"],a["a"],a["b"],!1,null,"7321747f",null);e["default"]=r.exports},"7a61":function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,".tui-bottom-popup[data-v-7321747f]{width:100%;position:fixed;left:0;right:0;bottom:0;z-index:99999;visibility:hidden;-webkit-transform:translate3d(0,100%,0);transform:translate3d(0,100%,0);-webkit-transform-origin:center;transform-origin:center;-webkit-transition:all .3s ease-in-out;transition:all .3s ease-in-out;min-height:%?20?%}.tui-popup-show[data-v-7321747f]{-webkit-transform:translateZ(0);transform:translateZ(0);visibility:visible}.tui-popup-mask[data-v-7321747f]{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.6);z-index:99996;-webkit-transition:all .3s ease-in-out;transition:all .3s ease-in-out;opacity:0;visibility:hidden}.tui-mask-show[data-v-7321747f]{opacity:1;visibility:visible}",""])},"80a42":function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,'.container[data-v-e7659e08]{padding-bottom:%?98?%}.tui-box[data-v-e7659e08]{padding:%?20?% 0 %?118?%;box-sizing:border-box}.tui-address[data-v-e7659e08]{min-height:%?80?%;padding:%?10?% 0;box-sizing:border-box;position:relative}.tui-userinfo[data-v-e7659e08]{font-size:%?30?%;font-weight:500;line-height:%?30?%;padding-bottom:%?12?%}.tui-name[data-v-e7659e08]{padding-right:%?40?%}.tui-addr[data-v-e7659e08]{font-size:%?24?%;word-break:break-all;padding-right:%?25?%}.tui-addr-tag[data-v-e7659e08]{padding:%?5?% %?8?%;-webkit-flex-shrink:0;flex-shrink:0;background:#eb0909;color:#fff;display:-webkit-inline-box;display:-webkit-inline-flex;display:inline-flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;font-size:%?25?%;line-height:%?25?%;-webkit-transform:scale(.8);transform:scale(.8);-webkit-transform-origin:0 center;transform-origin:0 center;border-radius:%?6?%}.tui-bg-img[data-v-e7659e08]{position:absolute;width:100%;height:%?8?%;left:0;bottom:0;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAL0AAAAECAMAAADszM6/AAAAOVBMVEUAAAAVqfH/fp//vWH/vWEVqfH/fp8VqfH/fp//vWEVqfH/fp8VqfH/fp//vWH/vWEVqfH/fp//vWHpE7b6AAAAEHRSTlMA6urqqlVVFRUVq6upqVZUDT4vVAAAAEZJREFUKM/t0CcOACAQRFF6r3v/w6IQJGwyDsPT882IQzQE0E3chToByjG5LwMgLZN3TQATmdypCciBya0cgOT3/h//9PgF49kd+6lTSIIAAAAASUVORK5CYII=") repeat}.tui-top[data-v-e7659e08]{margin-top:%?20?%;overflow:hidden}.tui-goods-title[data-v-e7659e08]{font-size:%?28?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.tui-padding[data-v-e7659e08]{box-sizing:border-box}.tui-goods-item[data-v-e7659e08]{width:100%;padding:%?20?% %?30?%;box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.tui-goods-img[data-v-e7659e08]{width:%?180?%;height:%?180?%;display:block;-webkit-flex-shrink:0;flex-shrink:0}.tui-goods-center[data-v-e7659e08]{-webkit-box-flex:1;-webkit-flex:1;flex:1;padding:%?20?% %?8?%;box-sizing:border-box}.tui-goods-name[data-v-e7659e08]{max-width:%?310?%;word-break:break-all;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;font-size:%?26?%;line-height:%?32?%}.tui-goods-attr[data-v-e7659e08]{font-size:%?22?%;color:#888;line-height:%?32?%;padding-top:%?20?%;word-break:break-all;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}.tui-price-right[data-v-e7659e08]{text-align:right;font-size:%?24?%;color:#888;line-height:%?30?%;padding-top:%?20?%}.tui-flex[data-v-e7659e08]{width:100%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;font-size:%?26?%}.tui-total-flex[data-v-e7659e08]{-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end}.tui-color-red[data-v-e7659e08],.tui-invoice-text[data-v-e7659e08]{color:#e41f19;padding-right:%?30?%}.tui-balance[data-v-e7659e08]{font-size:%?28?%;font-weight:500}.tui-black[data-v-e7659e08]{color:#222;line-height:%?30?%}.tui-gray[data-v-e7659e08]{color:#888;font-weight:400}.tui-light-dark[data-v-e7659e08]{color:#666}.tui-goods-price[data-v-e7659e08]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;padding-top:%?20?%}.tui-size-26[data-v-e7659e08]{font-size:%?26?%;line-height:%?26?%}.tui-price-large[data-v-e7659e08]{font-size:%?34?%;line-height:%?32?%;font-weight:600}.tui-flex-end[data-v-e7659e08]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:end;-webkit-align-items:flex-end;align-items:flex-end;padding-right:0}.tui-phcolor[data-v-e7659e08]{color:#b3b3b3;font-size:%?26?%}\n\n\n\n.tui-remark-box[data-v-e7659e08]{padding:%?26?% %?30?%}\n\n.tui-remark[data-v-e7659e08]{-webkit-box-flex:1;-webkit-flex:1;flex:1;font-size:%?26?%;padding-left:%?64?%}.tui-scale-small[data-v-e7659e08]{-webkit-transform:scale(.8);transform:scale(.8);-webkit-transform-origin:100% center;transform-origin:100% center}.tui-scale-small .wx-switch-input[data-v-e7659e08]{margin:0!important}\n\n[data-v-e7659e08] uni-switch .uni-switch-input{margin-right:0!important}\n\n.tui-tabbar[data-v-e7659e08]{width:100%;height:%?98?%;background:#fff;position:fixed;left:0;bottom:0;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;font-size:%?26?%;box-shadow:0 0 1px rgba(0,0,0,.3);padding-bottom:env(safe-area-inset-bottom);z-index:999}.tui-pr-30[data-v-e7659e08]{padding-right:%?30?%}.tui-pr-20[data-v-e7659e08]{padding-right:%?20?%}.tui-none-addr[data-v-e7659e08]{height:%?80?%;padding-left:%?5?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.tui-addr-img[data-v-e7659e08]{width:%?36?%;height:%?46?%;display:block;margin-right:%?15?%}.tui-pr25[data-v-e7659e08]{padding-right:%?25?%}.tui-safe-area[data-v-e7659e08]{height:%?1?%;padding-bottom:env(safe-area-inset-bottom)}.tui-order-title[data-v-e7659e08]{position:relative;font-size:%?28?%;line-height:%?28?%;padding-left:%?12?%;box-sizing:border-box}.tui-order-title[data-v-e7659e08]:before{content:"";position:absolute;left:0;top:0;border-left:%?4?% solid #eb0909;height:100%}',""])},ab6b:function(t,e,i){"use strict";var a=i("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("f499")),o=a(i("96d3")),s=a(i("e884")),r=a(i("64ed")),d=a(i("afea")),l=a(i("339f")),u={components:{tuiButton:o.default,tuiListCell:s.default,tuiBottomPopup:r.default,tuiLoading:l.default},data:function(){return{hasCoupon:!0,insufficient:!1,orders:[],amount:0,norm:{product:{company:{image:{}}}},address:{},ids:"",desc:"",number:1,applied:!1,loading:!1}},onShow:function(){var t=this,e=uni.getStorageSync("addressId");console.log("show"),e?(console.log(1),d.default.address(e).then(function(e){console.log(e),t.address=e}).catch(function(t){console.log(t)})):d.default.defaultAddress().then(function(e){console.log(e),t.address=e}).catch(function(t){console.log(t)})},onLoad:function(t){var e=setInterval(function(){console.log(1),clearInterval(e)},2e3);console.log("load");var i=this;t.number&&(i.number=t.number),d.default.norm(t.id).then(function(t){t.id&&(i.norm=t)}).catch(function(t){console.log(t)})},methods:{chooseAddr:function(){uni.navigateTo({url:"../address/index"})},onKeyInput:function(t){this.desc=t.target.value},btnPay:function(){var t=this;if(t.address.id){this.applied=!0,this.loading=!0;var e=[{id:t.norm.product.id,norm:{id:t.norm.id,number:t.number}}];this.tui.wechatBowser()?(console.log("wechat"),this.tui.jssdk().then(function(i){d.default.applyOrder((0,n.default)(e),t.address.id,t.desc,"web").then(function(t){console.log(t);var e=t[0].current_payment.js_pay;i.chooseWXPay({appId:e.appId,timestamp:e.timeStamp,nonceStr:e.nonceStr,package:e.package,signType:e.signType,paySign:e.paySign,success:function(e){var i=setInterval(function(){console.log(1),d.default.order(t[0].id).then(function(t){"pay"==t.status&&(clearInterval(i),uni.navigateTo({url:"../order/success?id="+t.id}))}).catch(function(t){alert(t)})},2e3)}})}).catch(function(t){console.log(t)})}).catch(function(t){})):(console.log("app"),d.default.applyOrder((0,n.default)(e),t.address.id,t.desc,"app").then(function(t){t[0].id&&(console.log(t),window.parent.postMessage({event:"pay",params:{payment:t}},"*"))}).catch(function(t){}))}else this.tui.toast("请填写收件人信息",2e3,!1)}}};e.default=u},b1dd:function(t,e,i){"use strict";var a=i("e97d"),n=i.n(a);n.a},d4a5:function(t,e,i){"use strict";i.r(e);var a=i("f7c8"),n=i("1265");for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);i("3891");var s=i("2877"),r=Object(s["a"])(n["default"],a["a"],a["b"],!1,null,"e7659e08",null);e["default"]=r.exports},da1d:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("c5f6");var a={name:"tuiBottomPopup",props:{mask:{type:Boolean,default:!0},show:{type:Boolean,default:!1},bgcolor:{type:String,default:"#fff"},height:{type:Number,default:0}},methods:{handleClose:function(){this.show&&this.$emit("close",{})}}};e.default=a},e97d:function(t,e,i){var a=i("7a61");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("0236b4ed",a,!0,{sourceMap:!1,shadowMode:!1})},ed5b:function(t,e,i){"use strict";i.r(e);var a=i("da1d"),n=i.n(a);for(var o in a)"default"!==o&&function(t){i.d(e,t,function(){return a[t]})}(o);e["default"]=n.a},f49d:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{on:{touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e)}}},[i("v-uni-view",{staticClass:"tui-popup-class tui-bottom-popup",class:{"tui-popup-show":t.show},style:{background:t.bgcolor,height:t.height?t.height+"rpx":"auto"}},[t._t("default")],2),t.mask?i("v-uni-view",{staticClass:"tui-popup-mask",class:[t.show?"tui-mask-show":""],on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.handleClose.apply(void 0,arguments)}}}):t._e()],1)},n=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n})},f7c8:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"container"},[i("v-uni-view",{staticClass:"tui-box"},[i("tui-list-cell",{attrs:{arrow:!0,last:!0,radius:!0},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.chooseAddr.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"tui-address"},[t.address.id?i("v-uni-view",[i("v-uni-view",{staticClass:"tui-userinfo"},[i("v-uni-text",{staticClass:"tui-name"},[t._v(t._s(t.address.name))]),t._v(t._s(t.address.phone))],1),i("v-uni-view",{staticClass:"tui-addr"},[t.address.tag&&"default"==t.address.tag?i("v-uni-view",{staticClass:"tui-addr-tag"},[t._v("默认")]):t._e(),i("v-uni-text",[t._v(t._s(t.address.content))])],1)],1):i("v-uni-view",{staticClass:"tui-none-addr"},[i("v-uni-image",{staticClass:"tui-addr-img",attrs:{src:"/static/images/index/map.png",mode:"widthFix"}}),i("v-uni-text",[t._v("选择收货地址")])],1)],1),i("v-uni-view",{staticClass:"tui-bg-img"})],1),i("v-uni-view",{staticClass:"tui-top tui-goods-info"},[i("tui-list-cell",{attrs:{hover:!1,lineLeft:!0}},[i("v-uni-view",{staticClass:"tui-goods-title"},[i("v-uni-image",{staticStyle:{width:"40rpx",height:"40rpx","margin-right":"10rpx"},attrs:{src:t.norm.product.company.image?t.norm.product.company.image.image_path:"",mode:"widthFix"}}),t._v(t._s(t.norm.product.company.name))],1)],1),i("tui-list-cell",{attrs:{hover:!1,padding:"0"}},[i("v-uni-view",{staticClass:"tui-goods-item"},[i("v-uni-image",{staticClass:"tui-goods-img",attrs:{src:t.norm.product.default_image}}),i("v-uni-view",{staticClass:"tui-goods-center"},[i("v-uni-view",{staticClass:"tui-goods-name"},[t._v(t._s(t.norm.product.name))]),i("v-uni-view",{staticClass:"tui-goods-attr"},[t._v(t._s(t.norm.spec_attr_names))])],1),i("v-uni-view",{staticClass:"tui-price-right"},[i("v-uni-view",[t._v("￥"+t._s(t.norm.price))]),i("v-uni-view",[t._v("x"+t._s(t.number))])],1)],1)],1),i("tui-list-cell",{attrs:{hover:!1}},[i("v-uni-view",{staticClass:"tui-padding tui-flex"},[i("v-uni-view",[t._v("商品总额：")]),i("v-uni-view",[t._v("￥"+t._s(t.norm.price*t.number))])],1)],1),i("tui-list-cell",{attrs:{hover:!1,lineLeft:!1,padding:"0"}},[i("v-uni-view",{staticClass:"tui-remark-box tui-padding tui-flex"},[i("v-uni-view",[t._v("订单备注")]),i("v-uni-input",{staticClass:"tui-remark",attrs:{type:"text",placeholder:"选填: 请先和商家协商一致","placeholder-class":"tui-phcolor"},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.onKeyInput.apply(void 0,arguments)}}})],1)],1),i("tui-list-cell",{attrs:{hover:!1}},[i("v-uni-view",{staticClass:"tui-padding tui-flex"},[i("v-uni-view",[t._v("配送费")]),i("v-uni-view",[t._v("包邮")])],1)],1),i("tui-list-cell",{attrs:{hover:!1}},[i("v-uni-view",{staticClass:"tui-padding tui-flex"},[i("v-uni-view",[t._v("返还金币：")]),i("v-uni-view",[t._v(t._s(t.norm.product.coin*t.number))])],1)],1),i("tui-list-cell",{attrs:{hover:!1,last:!0}},[i("v-uni-view",{staticClass:"tui-padding tui-flex tui-total-flex"},[i("v-uni-view",{staticClass:"tui-flex-end tui-color-red"},[i("v-uni-view",{staticClass:"tui-black"},[t._v("合计：")]),i("v-uni-view",{staticClass:"tui-size-26"},[t._v("￥")]),i("v-uni-view",{staticClass:"tui-price-large"},[t._v(t._s(t.norm.price*t.number))])],1)],1)],1)],1)],1),i("v-uni-view",{staticClass:"tui-safe-area"}),i("v-uni-view",{staticClass:"tui-tabbar"},[i("v-uni-view",{staticClass:"tui-flex-end tui-color-red tui-pr-20"},[i("v-uni-view",{staticClass:"tui-black"},[t._v("实付金额:")]),i("v-uni-view",{staticClass:"tui-size-26"},[t._v("￥")]),i("v-uni-view",{staticClass:"tui-price-large"},[t._v(t._s(t.number*t.norm.price))])],1),i("v-uni-view",{staticClass:"tui-pr25"},[i("tui-button",{attrs:{width:"200rpx",height:"70rpx",type:"danger",shape:"circle",disabled:t.applied},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.btnPay.apply(void 0,arguments)}}},[t._v("确认支付")])],1)],1),i("tui-loading",{attrs:{visible:t.loading}})],1)},n=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n})}}]);