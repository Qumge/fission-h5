(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/new"],{"23d0":function(e,n,t){"use strict";(function(e,o){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=u(t("2047"));function u(e){return e&&e.__esModule?e:{default:e}}var r=function(){return t.e("components/extend/button/button").then(t.bind(null,"c79d"))},c=function(){return t.e("components/list-cell/list-cell").then(t.bind(null,"798e"))},i=function(){return t.e("components/bottom-popup/bottom-popup").then(t.bind(null,"450a"))},d=function(){return t.e("components/loading/loading").then(t.bind(null,"d373"))},s={components:{tuiButton:r,tuiListCell:c,tuiBottomPopup:i,tuiLoading:d},data:function(){return{hasCoupon:!0,insufficient:!1,orders:[],amount:0,norm:{product:{company:{image:{}}}},address:{},ids:"",desc:"",number:1,applied:!1,loading:!1}},onShow:function(){var n=this,t=e.getStorageSync("addressId");console.log(o("show"," at pages/order/new.vue:147")),t?(console.log(o(1," at pages/order/new.vue:149")),a.default.address(t).then(function(e){console.log(o(e," at pages/order/new.vue:151")),n.address=e}).catch(function(e){console.log(o(e," at pages/order/new.vue:154"))})):a.default.defaultAddress().then(function(e){console.log(o(e," at pages/order/new.vue:158")),n.address=e}).catch(function(e){console.log(o(e," at pages/order/new.vue:161"))})},onLoad:function(e){var n=setInterval(function(){console.log(o(1," at pages/order/new.vue:167")),clearInterval(n)},2e3);console.log(o("load"," at pages/order/new.vue:170"));var t=this;e.number&&(t.number=e.number),a.default.norm(e.id).then(function(e){e.id&&(t.norm=e)}).catch(function(e){console.log(o(e," at pages/order/new.vue:180"))})},methods:{chooseAddr:function(){e.navigateTo({url:"../address/index"})},onKeyInput:function(e){this.desc=e.target.value},btnPay:function(){var n=this;if(n.address.id){this.applied=!0,this.loading=!0;var t=[{id:n.norm.product.id,norm:{id:n.norm.id,number:n.number}}];this.tui.wechatBowser()?(console.log(o("wechat"," at pages/order/new.vue:202")),this.tui.jssdk().then(function(u){a.default.applyOrder(JSON.stringify(t),n.address.id,n.desc,"web").then(function(t){console.log(o(t," at pages/order/new.vue:205"));var r=t[0].current_payment.js_pay;u.chooseWXPay({appId:r.appId,timestamp:r.timeStamp,nonceStr:r.nonceStr,package:r.package,signType:r.signType,paySign:r.paySign,success:function(u){var r=setInterval(function(){console.log(o(1," at pages/order/new.vue:217")),a.default.queryOrder(t[0].id).then(function(t){"pay"==t.status&&(clearInterval(r),n.applied=!1,n.loading=!1,e.navigateTo({url:"../order/success?id="+t.id}))}).catch(function(e){alert(e)})},2e3)}})}).catch(function(e){console.log(o(e," at pages/order/new.vue:234"))})}).catch(function(e){})):(console.log(o("app"," at pages/order/new.vue:241")),a.default.applyOrder(JSON.stringify(t),n.address.id,n.desc,"app").then(function(e){e[0].id&&(console.log(o(e," at pages/order/new.vue:244")),n.applied=!1,n.loading=!1,window.parent.postMessage({event:"pay",params:{payment:e}},"*"))}).catch(function(e){}))}else this.tui.toast("请填写收件人信息",2e3,!1)}}};n.default=s}).call(this,t("6e42")["default"],t("0de9")["default"])},"2f6b":function(e,n,t){"use strict";var o=t("9760"),a=t.n(o);a.a},6150:function(e,n,t){"use strict";(function(e){t("17f2"),t("921b");o(t("66fd"));var n=o(t("873d"));function o(e){return e&&e.__esModule?e:{default:e}}e(n.default)}).call(this,t("6e42")["createPage"])},"69c8":function(e,n,t){"use strict";var o,a=function(){var e=this,n=e.$createElement;e._self._c},u=[];t.d(n,"b",function(){return a}),t.d(n,"c",function(){return u}),t.d(n,"a",function(){return o})},"6d5c":function(e,n,t){"use strict";t.r(n);var o=t("ce68"),a=t.n(o);for(var u in o)"default"!==u&&function(e){t.d(n,e,function(){return o[e]})}(u);n["default"]=a.a},"873d":function(e,n,t){"use strict";t.r(n);var o=t("69c8"),a=t("fd17");for(var u in a)"default"!==u&&function(e){t.d(n,e,function(){return a[e]})}(u);t("2f6b");var r,c=t("f0c5"),i=Object(c["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],r);n["default"]=i.exports},9760:function(e,n,t){},cb45:function(e,n,t){},ce68:function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var t={onLaunch:function(){console.log(e("App Launch"," at App.vue:5")),this.tui.wxAuthorize()},onShow:function(){console.log(e("App show"," at App.vue:13"))},onHide:function(){console.log(e("App Hide"," at App.vue:16"))}};n.default=t}).call(this,t("0de9")["default"])},e016:function(e,n,t){"use strict";t.r(n);var o=t("6d5c");for(var a in o)"default"!==a&&function(e){t.d(n,e,function(){return o[e]})}(a);t("e49a");var u,r,c,i,d=t("f0c5"),s=Object(d["a"])(o["default"],u,r,!1,null,null,null,!1,c,i);n["default"]=s.exports},e49a:function(e,n,t){"use strict";var o=t("cb45"),a=t.n(o);a.a},fd17:function(e,n,t){"use strict";t.r(n);var o=t("23d0"),a=t.n(o);for(var u in o)"default"!==u&&function(e){t.d(n,e,function(){return o[e]})}(u);n["default"]=a.a}},[["6150","common/runtime","common/vendor"]]]);